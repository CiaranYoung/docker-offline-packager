# docker-offline-packager
Packaging a Docker image for deployment on an offline machine.
# Docker 镜像自动化打包工作流

该工作流用于自动化处理 Docker 镜像的拉取和打包，特别适合需要离线部署或镜像备份的场景。通过支持多架构、多镜像的组合，实现镜像的高效传输和存储。

## 🛠 功能概述

- **镜像自动拉取**：支持指定一个或多个 Docker 镜像，未提供标签时默认使用当天日期。
- **多架构支持**：支持多平台架构（如 `amd64`、`arm64`），满足不同环境的部署需求。
- **智能打包**：
  - 单个镜像：保存为 `.tar` 文件
  - 多个镜像：打包为 `.tar.gz` 压缩文件
- **自动上传**：根据打包文件大小选择上传方式：
  - 小文件（< 100 MB）：上传到 GitHub Release
  - 大文件（≥ 100 MB）：通过 GitHub Actions Artifacts 上传
- **文件清理**：打包和上传完成后，自动清理中间文件，节省磁盘空间。

## 📋 使用步骤

1. **触发工作流**  
   手动运行工作流，并根据需要配置以下参数：
   - `images`（必填）：Docker 镜像列表，多个镜像以逗号分隔。
   - `tag`（可选）：发布标签，未设置时默认使用当天日期。
   - `arch`（可选）：镜像架构，默认为 `amd64`。

2. **镜像拉取与打包**  
   自动拉取指定的镜像，并根据镜像数量选择打包方式。单个镜像会被保存为 `.tar` 文件，多镜像会被打包成 `.tar.gz`。

3. **上传方式选择**  
   工作流会自动检测打包文件的大小，选择合适的上传方式，小文件上传到 GitHub Release，大文件使用 GitHub Actions Artifacts 进行上传。

4. **自动清理**  
   工作流在打包和上传完成后，自动删除生成的中间文件，以保持环境的整洁。

## 🎯 优势

- **自动化操作**：简化镜像拉取、打包和上传的全过程。
- **多架构兼容**：支持不同架构的镜像，适应多种部署需求。
- **高效的离线部署**：支持多镜像打包，便于管理和传输。

---

此工作流提供了一种高效的方式来管理 Docker 镜像，无论是用于备份、测试，还是离线部署，都能满足你的需求。
